// **-----
// STRUCTURE
// **-----

$phi: 1.618;

$base_font_size: 20;
$px: ( 1 / $base_font_size ) * 1rem;

// Post and widget column settings
$readable_width: 40rem;
$default_gutter: $phi * 1.25rem;
// 0.3 means sidebar will be 30% width
$small_col: 0;

// DEFAULT _S "STRUCTURE" VARS
$size__site-main: 100%;
$size__site-sidebar: percentage($small_col);
// /end



// Padding settings
$default_h_padding: $phi * $phi * $phi * 1rem;
$default_v_padding: $default_h_padding;

// Posts and widgets horizontal padding
$post_l_padding: $default_h_padding;
$post_r_padding: $post_l_padding;
$widget_l_padding: $default_h_padding / $phi;
$widget_r_padding: $widget_l_padding;

// Posts and widgets vertical padding
$post_t_padding: $default_h_padding / $phi;
$post_b_padding: $post_t_padding;
$widget_t_padding: $default_h_padding / ( $phi * $phi );
$widget_b_padding: $widget_t_padding;



@function total_site_width() {
    // Figure out how many overall rems wide the posts should be, allowing for a readabiliity optimized width on text plus left and right padding
    $total_post_width_rem: $readable_width + $post_l_padding + $post_r_padding;
    
    // Figure out how many rems wide the widgets should be in order to have a golden ratio relationship with the posts
    $sidebar_width_rem: (( $total_post_width_rem / (1 - $small_col) ) + $widget_l_padding + $widget_r_padding ) * $small_col;
    
    // Add the two together in order to determine how many rems wide the total site wrapper should be
    @return $total_post_width_rem + $sidebar_width_rem + $default_gutter;
    // @return $total_post_width_rem;
}

// **-----
// TYPOGRAPHY
// **-----

// Now enqueuing fonts in functions.php
// @import url("//fonts.googleapis.com/css?family=Khula:300,400,600,700,800"); 
// @import url("//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css");


// DEFAULT _S "TYPOGRAPHY" VARS
// font-stack from cssfontstack.com
$font__main: Khula, "Trebuchet MS", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Tahoma, sans-serif;
$font__code: Monaco, Consolas, "Andale Mono", "DejaVu Sans Mono", monospace;
$font__pre: "Courier 10 Pitch", Courier, monospace;
$font__line-height-body: $phi*1em;
$font__line-height-pre: $phi*1em;
// /end

$htag_lineheight: 1.313em;
$htag_family: $font__main;
$htag_weight: 600;

// H tag font sizes 1 through 6
$htag_sizes: 3, 2.25, 1.5, 1.313, 1.125, 1;

// H tag vertical margins 1 through 6
$htag_vmargins: 0.563, 0.625, 1.313, 1.313, 1.313, 0.75;

@mixin htags( $factor: 1 ) {
    h1, h2, h3, h4, h5, h6 {
        font-family: $htag_family;
        line-height: $htag_lineheight;
        font-weight: $htag_weight;
    }
    @for $i from 1 through 6 {
        h#{$i} {
            $value: nth($htag_sizes, $i);
            $size: if( ($value * $factor) < 1, 1, $value * $factor );
            font-size: $size * 1em;
            margin: ( nth($htag_vmargins, $i) * 1em ) 0;
        }
    }
    // Set H1 widget titles default size
    .widget-title {
        $default: nth($htag_sizes, 4);
        $size: if( ($default * $factor) < 1, 1, $default * $factor );
        font-size: $size * 1em * 0.9;
    }
}


// **-----
// COLORS
// **-----

// DEFAULT _S "COLORS" VARS
$color__background-body: #f0f0f0;
$color__background-screen: #f0f0f0;
$color__background-hr: #ccc;
$color__background-button: #e6e6e6;
$color__background-pre: #eee;
$color__background-ins: #fff9c0;

$color__text-screen: #21759b;
$color__text-input: #666;
$color__text-input-focus: #111;
$color__link: #00ACDF;
$color__link-visited: darken($color__link, 5%);
$color__link-hover: lighten($color__link, 3%); // darker rgba(40, 57, 77, 1);
$color__text-main: #404040;

$color__border-button: #ccc #ccc #bbb;
$color__border-button-hover: #ccc #bbb #aaa;
$color__border-button-focus: #aaa #bbb #bbb;
$color__border-input: #ccc;
$color__border-abbr: #666;
// /end


// custom colors
$color__background-header: #f9f9f9;
$color__box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);
$color__header-box-shadow: 0px 1px 3px rgba(190, 190, 190, 0.5);
$color__light-border: gainsboro;

$color__background-main-panel: #fff;
$color__border-main-panel: transparent;

$color__background-sub-panel: whitesmoke;
$color__border-sub-panel: white;
$color__text-sub-panel: #9e9e9e;

$color__entry_highlight: silver;

// Mixins to apply coloring

@mixin guide() { // Originally used as a guide, but this is the color I want for these items
    background: #ffffff;
}

@mixin body() {
    border-top: 2*$px solid $color__border-main-panel;
    background-color: $color__background-body;
}

@mixin search_toggle() {
    .search-toggle {
        position: absolute;
        top: 0;
        right: 0;
        width: 4rem;
        height: 4.375rem;
        padding: 25px;
        color: $color__text-sub-panel;
        text-align: center;
        cursor: pointer;
    }
    .search-toggle:hover,
    .search-toggle.active {
        background: $color__background-main-panel;
    }
    .main-navigation ul {
        padding-right: 32px;
    }
}

@mixin topbutton() {
    .topbutton {
        height: 50*$px;
        width: 50*$px;
        position: fixed;
        right: 20*$px;
        bottom: 20*$px;
        z-index: 2;
        font-family: "FontAwesome";
        color: white;
        background: lighten($color__link, 5%);
        display: none;
        font-size: 24*$px;
        opacity: 0.5;
    }
    .topbutton:hover {
        opacity: 1;
    }
    .topbutton:hover:before,
    .topbutton:before:hover {
        color: white;
    }
    .topbutton:before {
        content: "\f106";
        display: block;
        text-align: center;
        padding-top: 5px;
    }
}

@mixin links() {
    a {
        text-decoration: none;
        border-bottom: 1px dotted transparent;
    }
    a:hover, a:active {
        // border-bottom: 1px dotted $color__link;
    }
}

@mixin blockquote() {
    background-color: inherit;
    border-left: 6*$px solid $color__light-border;
    color: $color__text-sub-panel;
    a, a:visited, a:active {
        color: inherit;
    }
}

@mixin main_panel() {
    background-color: $color__background-main-panel;
    border: 1*$px solid $color__border-main-panel;
    box-shadow: $color__box-shadow;
}

@mixin sub_panel() {
    background-color: $color__background-sub-panel;
    border: 1*$px solid $color__border-sub-panel;
    box-shadow: inset $color__box-shadow;
    color: $color__text-sub-panel;
    a, a:visited, a:active {
        color: inherit;
    }
}

@mixin widget-divider() {
    border-bottom: 1px solid $color__light-border;
}
@mixin widget-divider-top() {
    border-top: 1px solid $color__light-border;
}

@mixin entry_meta() {
    background-color: transparent;
    color: $color__text-sub-panel;
    border-top: 1px solid $color__light-border;
    border-bottom: 1px solid $color__light-border;
    a, a:visited, a:active {
        color: inherit;
    }
    a:hover, a:active {
        // border-bottom: 1px dotted $color__link;
    }
}
@mixin content_link() {
    a, a:link, a:visited {
        border-bottom: 1px solid $color__link;
        // background-color: lighten($color__background-sub-panel, 2%);
        // color: $color__text-main;
    }
    a:hover, a:active {
        background-color: $color__background-sub-panel;
    }
}
@mixin img_caption() {
    color: $color__text-sub-panel;
    background: $color__background-sub-panel;
}

@mixin entry_footer() {
    color: inherit;
    border-bottom: none;
    span {
        border-top: none;
    }
}
@mixin comment() {
    //background-color: rgba(250, 250, 250, 0.05);
    //border: 1*$px solid silver;
    //box-shadow: inset $color__box-shadow;
}
@mixin sticky_post() {
    border-bottom: 5*$px solid $color__link;
}
@mixin more_link() {
    background: none;
    border: 1px solid $color__light-border;
    color: $color__text-sub-panel;
}
@mixin site_footer() {
    a {
        color: darken($color__link, 5%);
    }
}

// Menu styling

@mixin child_menu_expanded() {
    background-color: darken(saturate($color__background-sub-panel, 5%), 1%);
    border: 1*$px solid $color__border-sub-panel;
    border-bottom: 0;
    box-shadow: $color__box-shadow;
}

@mixin child_menu_item() {
    a, a:link, a:visited {
        border: 0;
        border-top: 1*$px solid darken($color__border-sub-panel, 2%);
    }
    a:hover {
        background-color: lighten(saturate($color__background-sub-panel, 3%), 0.25%);
    }
}

@mixin compact_menu_item() {
    border-top: 1*$px solid $color__border-sub-panel;
    &:hover {
        border-bottom-color: transparent;
        background-color: darken(saturate($color__background-sub-panel, 5%), 1%);
    }
}

@mixin child_menu_compact() {
    background-color: darken(saturate($color__background-sub-panel, 7%), 2%);
}

@mixin child_menu_compact_item() {
    border-top: 1*$px solid darkent($color__border-sub-panel, 2%);
    &:hover {
        border-bottom-color: transparent;
        background-color: darken(saturate($color__background-sub-panel, 8%), 3%);
    }
}